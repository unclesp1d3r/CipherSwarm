---
name: block-schema-edits
enabled: true
event: file
action: block
conditions:
  - field: file_path
    operator: regex_match
    pattern: db/schema\.rb$
---

ðŸš« **Schema File Edit Blocked!**

Direct edits to `db/schema.rb` are not allowed. This file is auto-generated by Rails migrations.

**Why this is blocked:**

- `db/schema.rb` is regenerated on every `rails db:migrate`
- Manual edits will be silently overwritten
- Changes must be tracked in version-controlled migrations

**What to do instead:**

```bash
# Create a migration to change the schema
just db-migration AddColumnToTable column:type

# Or using Rails directly
bin/rails generate migration YourMigrationName

# Then run the migration
just db-migrate
```

**Examples:**

```bash
# Add a column
just db-migration AddEmailToUsers email:string:uniq

# Add an index
just db-migration AddIndexToTasksStatus

# Change a column
just db-migration ChangeColumnTypeInAgents status:integer
```

The schema file will update automatically when migrations run.
