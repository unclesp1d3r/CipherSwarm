---
name: warn-generated-files
enabled: true
event: file
action: warn
conditions:
  - field: file_path
    operator: regex_match
    pattern: (db/schema\.rb|db/structure\.sql|node_modules/|bun\.lockb|Gemfile\.lock)
---

âš™ï¸ **Auto-Generated File Edit Detected!**

You're editing a file that is automatically generated and should not be modified manually.

**Detected file types:**

ğŸ“ **Database Schema** (`db/schema.rb` or `db/structure.sql`)

- Generated automatically by Rails migrations
- Reflects the current database structure
- **Never edit manually** - changes will be overwritten

**What to do instead:**

```bash
# Create a migration to modify the schema
just db-migration AddColumnToTable column:type

# Or use Rails generator
bin/rails generate migration ChangeTableStructure
```

ğŸ“¦ **Lock Files** (`Gemfile.lock`, `bun.lockb`)

- Generated by package managers
- Records exact dependency versions
- Should only be updated by package managers

**What to do instead:**

```bash
# For Ruby gems
bundle install
bundle update gem_name

# For JavaScript packages (bun)
bun install
bun update package-name
```

ğŸ“š **Dependencies** (`node_modules/`)

- Installed packages (gitignored)
- Never edit directly
- Changes will be lost on next install

**If you really need to edit:**

- Schema: Create a migration instead
- Lock files: Use package manager commands
- Dependencies: Fork the package or create a patch

**Common scenarios:**

âŒ Don't: Edit schema.rb to add a column âœ… Do: `bin/rails generate migration AddColumnToUsers email:string`

âŒ Don't: Modify Gemfile.lock versions manually âœ… Do: `bundle update specific_gem`

âŒ Don't: Change code in node_modules/ âœ… Do: Fork the package or submit a PR upstream
