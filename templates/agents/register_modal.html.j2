<!-- Modal Backdrop -->
<div class="fixed z-10 inset-0 overflow-y-auto" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <div class="flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0">
        <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity" aria-hidden="true"></div>

        <!-- Modal Panel -->
        <div
            class="inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full">
            <form hx-post="/agents/register" hx-target="#agents-table" hx-swap="outerHTML">
                <div class="bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4">
                    <div class="sm:flex sm:items-start">
                        <div class="mt-3 text-center sm:mt-0 sm:text-left w-full">
                            <h3 class="text-lg leading-6 font-medium text-gray-900" id="modal-title">
                                Register New Agent
                            </h3>
                            <div class="mt-2">
                                <p class="text-sm text-gray-500">
                                    Enter the details for the new hashcat agent.
                                </p>
                            </div>

                            <!-- Form Fields -->
                            <div class="mt-4 space-y-4">
                                <!-- Host Name -->
                                <div>
                                    <label for="host_name" class="block text-sm font-medium text-gray-700">
                                        Host Name
                                    </label>
                                    <input type="text" name="host_name" id="host_name"
                                        class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                                        required>
                                </div>

                                <!-- Operating System -->
                                <div>
                                    <label for="operating_system" class="block text-sm font-medium text-gray-700">
                                        Operating System
                                    </label>
                                    <input type="text" name="operating_system" id="operating_system"
                                        class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                                        required>
                                </div>

                                <!-- Client Signature -->
                                <div>
                                    <label for="client_signature" class="block text-sm font-medium text-gray-700">
                                        Client Signature
                                    </label>
                                    <input type="text" name="client_signature" id="client_signature"
                                        class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                                        required>
                                </div>

                                <!-- Devices -->
                                <div>
                                    <label for="devices" class="block text-sm font-medium text-gray-700">
                                        Devices (comma-separated)
                                    </label>
                                    <input type="text" name="devices" id="devices"
                                        class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                                        required placeholder="GPU0, GPU1, CPU">
                                </div>

                                <!-- Advanced Configuration -->
                                <div class="space-y-4">
                                    <div class="flex items-center justify-between">
                                        <h4 class="text-sm font-medium text-gray-900">Advanced Configuration</h4>
                                        <button type="button" class="text-sm text-indigo-600 hover:text-indigo-900"
                                            onclick="document.getElementById('advanced-config').classList.toggle('hidden')">
                                            Toggle
                                        </button>
                                    </div>

                                    <div id="advanced-config" class="hidden space-y-4">
                                        <!-- Update Interval -->
                                        <div>
                                            <label for="agent_update_interval"
                                                class="block text-sm font-medium text-gray-700">
                                                Update Interval (seconds)
                                            </label>
                                            <input type="number" name="agent_update_interval" id="agent_update_interval"
                                                class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                                                value="30" min="5">
                                        </div>

                                        <!-- Native Hashcat -->
                                        <div class="flex items-center">
                                            <input type="checkbox" name="use_native_hashcat" id="use_native_hashcat"
                                                class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                                            <label for="use_native_hashcat" class="ml-2 block text-sm text-gray-900">
                                                Use Native Hashcat
                                            </label>
                                        </div>

                                        <!-- Backend Device -->
                                        <div>
                                            <label for="backend_device" class="block text-sm font-medium text-gray-700">
                                                Backend Device
                                            </label>
                                            <input type="text" name="backend_device" id="backend_device"
                                                class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                                                placeholder="Optional: Device IDs (comma-separated)">
                                        </div>

                                        <!-- OpenCL Devices -->
                                        <div>
                                            <label for="opencl_devices" class="block text-sm font-medium text-gray-700">
                                                OpenCL Devices
                                            </label>
                                            <input type="text" name="opencl_devices" id="opencl_devices"
                                                class="mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"
                                                placeholder="Optional: OpenCL device types (comma-separated)">
                                        </div>

                                        <!-- Additional Hash Types -->
                                        <div class="flex items-center">
                                            <input type="checkbox" name="enable_additional_hash_types"
                                                id="enable_additional_hash_types"
                                                class="h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded">
                                            <label for="enable_additional_hash_types"
                                                class="ml-2 block text-sm text-gray-900">
                                                Enable Additional Hash Types
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Modal Actions -->
                <div class="bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse">
                    <button type="submit"
                        class="w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:ml-3 sm:w-auto sm:text-sm">
                        Register Agent
                    </button>
                    <button type="button"
                        class="mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:w-auto sm:text-sm"
                        onclick="this.closest('.fixed').remove()">
                        Cancel
                    </button>
                </div>
            </form>
        </div>
    </div>
</div>