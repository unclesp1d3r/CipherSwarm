<tr id="agent-{{ agent.id }}">
    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">
        {{ agent.host_name }}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        {{ agent.operating_system }}
    </td>
    <td class="px-6 py-4 whitespace-nowrap">
        <span class="px-2 inline-flex text-xs leading-5 font-semibold rounded-full
            {% if agent.state == 'active' %}
                bg-green-100 text-green-800
            {% elif agent.state == 'pending' %}
                bg-yellow-100 text-yellow-800
            {% elif agent.state == 'stopped' %}
                bg-gray-100 text-gray-800
            {% else %}
                bg-red-100 text-red-800
            {% endif %}
        ">
            {{ agent.state }}
        </span>
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        {{ agent.devices|join(", ") }}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        {% if agent.last_seen_at %}
        {{ agent.last_seen_at|timeago }}
        {% else %}
        Never
        {% endif %}
    </td>
    <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
        <div class="flex space-x-2">
            <button class="text-indigo-600 hover:text-indigo-900" hx-get="/agents/{{ agent.id }}/details"
                hx-target="#modal-container">
                Details
            </button>
            {% if agent.state == 'active' %}
            <button class="text-red-600 hover:text-red-900" hx-post="/agents/{{ agent.id }}/shutdown"
                hx-confirm="Are you sure you want to shutdown this agent?" hx-target="#agent-{{ agent.id }}">
                Shutdown
            </button>
            {% endif %}
        </div>
    </td>
</tr>