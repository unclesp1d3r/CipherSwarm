<!-- Project Context Fragment -->
<div class="max-w-md mx-auto bg-white rounded-xl shadow-md overflow-hidden md:max-w-2xl mt-6">
    <div class="w-full p-6">
        <h2 class="text-xl font-semibold text-gray-900 mb-4">Project Context</h2>
        <dl class="divide-y divide-gray-200 mb-4">
            <div class="py-2 flex justify-between">
                <dt class="font-medium text-gray-700">User</dt>
                <dd class="text-gray-900">{{ user.email }}</dd>
            </div>
            <div class="py-2 flex justify-between">
                <dt class="font-medium text-gray-700">Role</dt>
                <dd class="text-gray-900">{{ user.role }}</dd>
            </div>
            <div class="py-2 flex justify-between">
                <dt class="font-medium text-gray-700">Active Project</dt>
                <dd class="text-gray-900">{{ active_project.name if active_project else 'None' }}</dd>
            </div>
        </dl>
        <form id="project-context-form" hx-post="/api/v1/web/auth/context" hx-target="#project-context-form"
            hx-swap="outerHTML">
            <label for="project_id" class="block text-sm font-medium text-gray-700 mb-2">Switch Project</label>
            <select id="project_id" name="project_id"
                class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring focus:ring-blue-200 focus:ring-opacity-50 mb-4">
                {% for project in available_projects %}
                <option value="{{ project.id }}" {% if active_project and project.id==active_project.id %}selected{%
                    endif %}>{{ project.name }}</option>
                {% endfor %}
            </select>
            <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded shadow">Set Active Project</button>
        </form>
    </div>
</div>